(window.webpackJsonpstravakongen=window.webpackJsonpstravakongen||[]).push([[0],{153:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(20),c=n.n(o),s=(n(83),n(70)),u=n(7),l=n(41),i=n.n(l),d=n(10),m="https://www.strava.com/api/v3/",f=function(e,t){return i.a.request(t,{params:{access_token:e}})},g=function(e,t,n){return"".concat(e,"&").concat(t,"=").concat(n)},b=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return m+t.join("/")+"?"},p=function(e,t){return g(function(e,t){return g(b("segments",t,"leaderboard"),"club_id",e)}(e,t),"per_page",50)},k=n(38),y=8433,_={all:p,year:function(e,t){return g(p(e,t),"date_range","this_year")}},v=function(e){var t=Object(r.useState)(null),n=Object(u.a)(t,2),a=n[0],o=n[1],c=Object(r.useState)(null),s=Object(u.a)(c,2),l=s[0],i=s[1],m=e.segmentId,g=e.club||y,p=Object(d.e)((function(e){return e.accessToken}));return Object(r.useEffect)((function(){if(p){var t=(0,_[e.dateRange])(g,m);f(p,t).then((function(t){i({id:m,dateRange:e.dateRange,leaderboard:t.data.entries})}))}}),[m,e.dateRange,g,p]),Object(d.d)((function(e){return e.addLeaderboard}))(l),Object(r.useEffect)((function(){if(p){var e=b("segments",m);f(p,e).then((function(e){o(e.data)}))}}),[m,p]),Object(d.d)((function(e){return e.addSegment}))(a),null},O=n(73),h=n.n(O),j=n(77),E=n(33),w=n(34),S=n(72);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach((function(t){Object(E.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=function(e){var t=e.map((function(e,t){return N({},e,{rankPos:t})})),n=Object.values(Object(S.groupBy)(t,(function(e){return e.ranks})));return n.flatMap((function(e){return e.map((t=e[0].rankPos,function(e){return N({},e,{rankPos:t})}));var t}))},R=function(e,t,n){var r=function(e){return n[e].length+1},a=Array.from(t.filter((function(e){return n[e]}))),o=Object.entries(e).map((function(e,t){var n=Object(u.a)(e,2),o=n[0],c=n[1];return{athleteName:o,ranks:a.map((function(e){return t=c[e],n=e,t?t.rank:r(n);var t,n}))}})),c=w.b(w.a(w.c,"ranks"),(function(e){return e.reduce((function(e,t){return e+t}),0)}),o),s=Object.entries(c).map((function(e){var t=Object(u.a)(e,2);t[0];return t[1]})),l=Object(j.a)(s).sort((function(e,t){return e.ranks-t.ranks})),i=a.map((function(e){return r(e)})).reduce((function(e,t){return e+t}),0),d=l.filter((function(e){return e.ranks!==i}));return K(d)},T=n(2),x=n.n(T);n(111);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var I=function(e,t,n){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach((function(t){Object(E.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{clicked:t});return e?a.a.createElement(D,Object.assign({key:n},r)):a.a.createElement(L,{key:n})},L=function(e){return a.a.createElement("td",null,"  ")},D=function(e){e.athlete_name;var t=e.elapsed_time,n=e.start_date_local,r=e.rank,o=e.clicked,c=n.substr(0,10).split("-").reverse().join("."),s=function(e){var t=parseInt(e,10),n=new Date(null);return n.setSeconds(t),n.getHours()>1?n.toISOString().substr(11,8):n.toISOString().substr(14,5)}(t),u="".concat(s," (#").concat(r,")"),l={1:x.a.entry_first,2:x.a.entry_second,3:x.a.entry_third}[r]||x.a.entry_normal,i=function(e){var t=Math.abs(new Date-new Date(e));return Math.ceil(t/864e5)<7}(n)?" ".concat(x.a.entry_border):"";return a.a.createElement("td",{className:l+i},u," ",a.a.createElement("span",null,o&&c))},G=function(e){var t=a.a.useState(!1),n=Object(u.a)(t,2),r=n[0],o=n[1],c=Object(u.a)(e.args,5),s=c[0],l=c[1],i=c[2],d=c[3],m=c[4];return a.a.createElement("tr",{onClick:function(){return o(!r)}},a.a.createElement("td",null,a.a.createElement("b",null,s)," ",0===m&&"\ud83e\udd47",1===m&&"\ud83e\udd48",2===m&&"\ud83e\udd49"),a.a.createElement("td",{className:x.a.ranktext_header},a.a.createElement("span",{className:x.a.ranktext_rank},m+1),a.a.createElement("span",{className:x.a.ranktext_score}," (".concat(l,")"))),Array.from(d).map((function(e,t){return I(i[e],r,t)})))},M=function(e){var t=e.segmentId,n=e.segmentName,r=e.numAthletes,o=e.distance,c=e.averageGrade,s=e.clicked,u=Math.round(o/1e3*10)/10,l=c,i=" - ".concat(u+"km"," ").concat(l,"% (").concat(r,")");return a.a.createElement("a",{className:x.a.header,href:"https://www.strava.com/segments/"+t},n," ",s&&i)},C=function(e){var t=e.child;return a.a.createElement("th",{className:x.a.header},t," ")},V=function(e){var t=e.segmentRowMapper,n=a.a.useState(!1),r=Object(u.a)(n,2),o=r[0],c=r[1];return a.a.createElement("tr",{onClick:function(){return c(!o)}},a.a.createElement(C,{child:"Navn"}),a.a.createElement(C,{child:"# (Poeng)"}),t(o).map((function(e){return a.a.createElement(C,{key:e.props.segmentId,child:e})})))},B=function(e){var t=e.segments,n=e.dateRange,r=Object(d.e)((function(e){return e})),o=r.segments,c=r.athleteEfforts[n],s=r.segmentLeaderboards[n],u=R(c,t,s).map((function(e,n){var r=e.athleteName,o=e.ranks,s=e.rankPos;return a.a.createElement(G,{key:r,args:[r,o,c[r],t,s]})}));return a.a.createElement(h.a,{striped:!0,bordered:!0,hover:!0},a.a.createElement("thead",null,a.a.createElement(V,{segmentRowMapper:function(e){return t.map((function(t){var n=s[t]?s[t].length:"",r=o[t]&&o[t].name;return a.a.createElement(M,{key:t,segmentId:t,numAthletes:n,segmentName:r,distance:o[t]&&o[t].distance,averageGrade:o[t]&&o[t].average_grade,clicked:e})}))}})),a.a.createElement("tbody",null,u))},H=n(45),U=n.n(H),q=n(23),J=n.n(q),W={1942901:{id:1942901,name:"Tryvann",groups:{"Klatrekongen Vest":1,Klatrekongen:1,AllRoundern:1,Tryvanndobbelen:1}},4252879:{id:4252879,name:"Olaf Bulls vei",groups:{"Klatrekongen Vest":1}},660072:{id:660072,name:"Grefsenkollen",groups:{"Klatrekongen Vest":1,"Klatrekongen \xd8st":1,Klatrekongen:1,AllRoundern:1}},632847:{id:632847,name:"Kongsveien",groups:{Klatrekongen:1,"Klatrekongen \xd8st":1}},666298:{id:666298,name:"Svartskogbakken",groups:{"Klatrekongen \xd8st":1}},2783427:{id:2783427,name:"Sognsvann motsols, strand til strand",groups:{"L\xf8pekongen":1,AllRoundern:1}},2553283:{id:2553283,name:"Tour de Finance l\xf8p",groups:{"L\xf8pekongen":1}},1557103:{id:1557103,name:"Vettakollen opp langs eggen 2",groups:{"L\xf8pekongen":1,AllRoundern:1}},5102820:{id:5102820,name:"Holmenkollveien",groups:{Tryvanndobbelen:1}},9358707:{id:9358707,name:"Hammeren-Kikutkrysset",groups:{"Kikut Sykkel":1}},1331159:{id:1331159,name:"Zinoberveien - Kikut",groups:{"Kikut Sykkel":1}},8059590:{id:8059590,name:"Grefsenkollen ned",groups:{Utforkongen:1}},14733934:{id:14733934,name:"Tryvann ned",groups:{Utforkongen:1}},6890951:{id:6890951,name:"Greveveien downhill",groups:{Utforkongen:1}},666794:{id:666794,name:"S\xf8rkedalen",groups:{Tempokongen:1}},1229519:{id:1229519,name:"Maridalen",groups:{Tempokongen:1}}},Z="\ud83d\udeb4\ud83c\udffc\u200d\u2642\ufe0f",F={Klatrekongen:Z,"L\xf8pekongen":"\ud83c\udfc3\ud83c\udffb\u200d\u2642\ufe0f","Klatrekongen Vest":Z,"Klatrekongen \xd8st":Z,Tempokongen:Z,Utforkongen:"\ud83d\udeb4\ud83c\udffc\u200d\u2642\ufe0f \u2b07\ufe0f \ud83d\ude35 \u26b0\ufe0f",Tryvanndobbelen:"\ud83d\udeb4\ud83c\udffc\u200d\u2642\ufe0f \ud83c\udfc3\ud83c\udffb\u200d\u2642\ufe0f",AllRoundern:"\ud83d\udeb4\ud83c\udffc\u200d\u2642\ufe0f \ud83c\udfc3\ud83c\udffb\u200d\u2642\ufe0f"},Q=Object.keys(F),$={all:"Gjennom alle tider",year:"I \xe5r"},z=function(e){var t=e.match.params.segmentGroup,n=Q[0],r=F[t]?t:n,o=a.a.useState("all"),c=Object(u.a)(o,2),l=c[0],f=c[1],g=a.a.useState(r),b=Object(u.a)(g,2),p=b[0],y=b[1],_=k.parse(e.location.search);!function(){var e=a.a.useState(null),t=Object(u.a)(e,2),n=t[0],r=t[1];a.a.useEffect((function(){i.a.post(m+"oauth/token",{client_id:"39382",grant_type:"refresh_token",client_secret:"be12733c5800f88bba8a353c0089cb6ccaa7bbbd",refresh_token:"8e7c1f0a3911e6c54150ebc3cbdbde9066270ee4"}).then((function(e){r(e.data.access_token)})).catch((function(e){return console.log(e)}))}),[]),Object(d.d)((function(e){return e.addAccessToken}))(n)}();var O=[];try{var h=JSON.parse(_.segments);O=h.some(isNaN)?[]:h}catch(A){}var j=Object.values(W).filter((function(e){return e.groups[p]})).map((function(e){return e.id})),E=O.length>0?O:j,w=Object.entries($).map((function(e){var t=Object(u.a)(e,2),n=t[0],r=t[1];return a.a.createElement(J.a.Item,{key:n,className:x.a.dropdown_item,onClick:function(e){return f(n)}},r)})),S=function(e){return e.map((function(e){return a.a.createElement(J.a.Item,{key:e,className:x.a.dropdown_item,onClick:function(){return y(e)}},e+" "+F[e])}))},P=Object.keys(F),N=Object(s.a)(P),K=N[0],R=N[1],T=N.slice(2);return a.a.createElement("div",null,a.a.createElement("div",{className:x.a.button_row},a.a.createElement(U.a,{className:x.a.button,title:"Segmentgruppe : "+p+" "+F[p]},S([K,R]),a.a.createElement(J.a,{className:x.a.divider}),S(T)),a.a.createElement(U.a,{className:x.a.button,title:"Periode : "+$[l]},w)),a.a.createElement(B,{segments:E,dateRange:l}),E.map((function(e,t){return a.a.createElement(v,{key:t,club:_.club,dateRange:l,segmentId:e})})))},X=n(75),Y=n(17),ee=Object(d.c)({accessToken:null,athleteEfforts:{all:{},year:{}},segmentLeaderboards:{all:{},year:{}},segments:{},addAccessToken:Object(d.b)((function(e,t){t&&(e.accessToken=t)})),addSegment:Object(d.b)((function(e,t){if(t){var n=t.name,r=t.distance,a=t.average_grade;e.segments[t.id]={name:n,distance:r,average_grade:a}}})),addLeaderboard:Object(d.b)((function(e,t){if(t){var n=t.id;e.segmentLeaderboards[t.dateRange][n]=t.leaderboard;t.leaderboard.forEach((function(r){r.segment=n;var a=e.athleteEfforts[t.dateRange][r.athlete_name]||{};a[r.segment]=r,e.athleteEfforts[t.dateRange][r.athlete_name]=a}))}}))}),te=function(){return function(){var e=document.querySelector('meta[name="viewport"]');e&&(e.content="initial-scale=1",e.content="width=device-width")}(),a.a.createElement(d.a,{store:ee},a.a.createElement(X.a,null,a.a.createElement(Y.c,null,a.a.createElement(Y.a,{path:"/:segmentGroup",component:z}),a.a.createElement(Y.a,{path:"/",component:z}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},2:function(e,t,n){e.exports={entry_first:"mystyle_entry_first__GZGLw",entry_second:"mystyle_entry_second__13TpZ",entry_third:"mystyle_entry_third__3fLIV",entry_normal:"mystyle_entry_normal__34dj6",button_row:"mystyle_button_row__17d_B",button:"mystyle_button__1ALQQ",ranktext_td:"mystyle_ranktext_td__1tHWr",ranktext_rank:"mystyle_ranktext_rank__2OPnq",ranktext_score:"mystyle_ranktext_score__1CaNx",header:"mystyle_header__1abc1",th:"mystyle_th__1KFdi",score:"mystyle_score__3Csax",divider:"mystyle_divider__1Tx-L",entry_border:"mystyle_entry_border__1ohS_"}},78:function(e,t,n){e.exports=n(153)},83:function(e,t,n){}},[[78,1,2]]]);
//# sourceMappingURL=main.d87e6aad.chunk.js.map